2025-10-03 11:01:06.472 +07:00 [ERR] An error occurred using the connection to database '' on server 'localhost'.
2025-10-03 11:12:35.814 +07:00 [ERR] An error occurred using the connection to database '' on server 'localhost'.
2025-10-03 11:18:22.836 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM information_schema.tables
WHERE table_type = 'BASE TABLE' AND table_schema = 'EVChargingStation_Booking'
2025-10-03 11:18:22.988 +07:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER DATABASE CHARACTER SET utf8mb4;
2025-10-03 11:18:23.000 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ChargingStation` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `Name` varchar(200) CHARACTER SET utf8mb4 NOT NULL,
    `Address` varchar(500) CHARACTER SET utf8mb4 NOT NULL,
    `Latitude` double NOT NULL,
    `Longitude` double NOT NULL,
    `City` varchar(50) CHARACTER SET utf8mb4 NULL,
    `Province` varchar(50) CHARACTER SET utf8mb4 NULL,
    `Status` int NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `UpdatedAt` datetime(6) NULL,
    CONSTRAINT `PK_ChargingStation` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-10-03 11:18:23.008 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `User` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `FirstName` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `LastName` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Email` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `PhoneNumber` varchar(20) CHARACTER SET utf8mb4 NULL,
    `PasswordHash` varchar(255) CHARACTER SET utf8mb4 NOT NULL,
    `Role` int NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `UpdatedAt` datetime(6) NULL,
    CONSTRAINT `PK_User` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2025-10-03 11:18:23.035 +07:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ChargingPoint` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `StationId` int NOT NULL,
    `PointNumber` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `ConnectorType` int NOT NULL,
    `MaxPower` int NOT NULL,
    `PricePerKwh` decimal(65,30) NOT NULL,
    `PricePerHour` decimal(65,30) NOT NULL,
    `Status` int NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `UpdatedAt` datetime(6) NULL,
    CONSTRAINT `PK_ChargingPoint` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_ChargingPoint_ChargingStation_StationId` FOREIGN KEY (`StationId`) REFERENCES `ChargingStation` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-10-03 11:18:23.060 +07:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Vehicle` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` int NOT NULL,
    `LicensePlate` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `Model` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `Brand` varchar(100) CHARACTER SET utf8mb4 NOT NULL,
    `BatteryCapacity` int NOT NULL,
    `ConnectorType` int NOT NULL,
    `IsActive` tinyint(1) NOT NULL,
    `CreatedAt` datetime(6) NOT NULL,
    CONSTRAINT `PK_Vehicle` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Vehicle_User_UserId` FOREIGN KEY (`UserId`) REFERENCES `User` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-10-03 11:18:23.082 +07:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Bookings` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` int NOT NULL,
    `ChargingPointId` int NOT NULL,
    `BookingNumber` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `StartTime` datetime(6) NOT NULL,
    `EndTime` datetime(6) NULL,
    `ActualStartTime` datetime(6) NULL,
    `ActualEndTime` datetime(6) NULL,
    `EnergyConsumed` decimal(18,2) NULL,
    `TotalCost` decimal(18,2) NULL,
    `Status` int NOT NULL,
    `QRCode` varchar(1000) CHARACTER SET utf8mb4 NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `UpdatedAt` datetime(6) NULL,
    CONSTRAINT `PK_Bookings` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Bookings_ChargingPoint_ChargingPointId` FOREIGN KEY (`ChargingPointId`) REFERENCES `ChargingPoint` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Bookings_User_UserId` FOREIGN KEY (`UserId`) REFERENCES `User` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-10-03 11:18:23.111 +07:00 [INF] Executed DbCommand (20ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `Payment` (
    `Id` int NOT NULL AUTO_INCREMENT,
    `UserId` int NOT NULL,
    `BookingId` int NOT NULL,
    `PaymentNumber` varchar(50) CHARACTER SET utf8mb4 NOT NULL,
    `Amount` decimal(65,30) NOT NULL,
    `Method` int NOT NULL,
    `Status` int NOT NULL,
    `TransactionId` varchar(500) CHARACTER SET utf8mb4 NULL,
    `Description` varchar(1000) CHARACTER SET utf8mb4 NULL,
    `CreatedAt` datetime(6) NOT NULL,
    `ProcessedAt` datetime(6) NULL,
    CONSTRAINT `PK_Payment` PRIMARY KEY (`Id`),
    CONSTRAINT `FK_Payment_Bookings_BookingId` FOREIGN KEY (`BookingId`) REFERENCES `Bookings` (`Id`) ON DELETE CASCADE,
    CONSTRAINT `FK_Payment_User_UserId` FOREIGN KEY (`UserId`) REFERENCES `User` (`Id`) ON DELETE CASCADE
) CHARACTER SET=utf8mb4;
2025-10-03 11:18:23.123 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE UNIQUE INDEX `IX_Bookings_BookingNumber` ON `Bookings` (`BookingNumber`);
2025-10-03 11:18:23.137 +07:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Bookings_ChargingPointId` ON `Bookings` (`ChargingPointId`);
2025-10-03 11:18:23.147 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Bookings_UserId` ON `Bookings` (`UserId`);
2025-10-03 11:18:23.159 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ChargingPoint_StationId` ON `ChargingPoint` (`StationId`);
2025-10-03 11:18:23.172 +07:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Payment_BookingId` ON `Payment` (`BookingId`);
2025-10-03 11:18:23.185 +07:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Payment_UserId` ON `Payment` (`UserId`);
2025-10-03 11:18:23.198 +07:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_Vehicle_UserId` ON `Vehicle` (`UserId`);
2025-10-03 11:18:23.224 +07:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-03 11:18:23.295 +07:00 [INF] Now listening on: https://localhost:5003
2025-10-03 11:18:23.298 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-03 11:18:23.300 +07:00 [INF] Hosting environment: Production
2025-10-03 11:18:23.302 +07:00 [INF] Content root path: D:\HeThongQuanLyTramSac\src\services\BookingService
2025-10-03 11:42:02.210 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM information_schema.tables
WHERE table_type = 'BASE TABLE' AND table_schema = 'EVChargingStation_Booking'
2025-10-03 11:42:02.278 +07:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-03 11:42:02.358 +07:00 [INF] Now listening on: https://localhost:5003
2025-10-03 11:42:02.360 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-03 11:42:02.361 +07:00 [INF] Hosting environment: Production
2025-10-03 11:42:02.362 +07:00 [INF] Content root path: D:\HeThongQuanLyTramSac\src\services\BookingService
2025-10-03 11:58:01.277 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM information_schema.tables
WHERE table_type = 'BASE TABLE' AND table_schema = 'EVChargingStation_Booking'
2025-10-03 11:58:01.330 +07:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-03 11:58:01.408 +07:00 [INF] Now listening on: https://localhost:5003
2025-10-03 11:58:01.411 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-03 11:58:01.412 +07:00 [INF] Hosting environment: Development
2025-10-03 11:58:01.415 +07:00 [INF] Content root path: D:\HeThongQuanLyTramSac\src\services\BookingService
2025-10-03 12:07:42.081 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM information_schema.tables
WHERE table_type = 'BASE TABLE' AND table_schema = 'EVChargingStation_Booking'
2025-10-03 12:07:42.127 +07:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-03 12:07:42.191 +07:00 [INF] Now listening on: https://localhost:5003
2025-10-03 12:07:42.194 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-03 12:07:42.196 +07:00 [INF] Hosting environment: Development
2025-10-03 12:07:42.198 +07:00 [INF] Content root path: D:\HeThongQuanLyTramSac\src\services\BookingService
2025-10-03 12:09:43.973 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM information_schema.tables
WHERE table_type = 'BASE TABLE' AND table_schema = 'EVChargingStation_Booking'
2025-10-03 12:09:44.017 +07:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-03 12:09:44.076 +07:00 [INF] Now listening on: https://localhost:5003
2025-10-03 12:09:44.079 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-03 12:09:44.080 +07:00 [INF] Hosting environment: Development
2025-10-03 12:09:44.081 +07:00 [INF] Content root path: D:\HeThongQuanLyTramSac\src\services\BookingService
2025-10-03 12:18:29.838 +07:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM information_schema.tables
WHERE table_type = 'BASE TABLE' AND table_schema = 'EVChargingStation_Booking'
2025-10-03 12:18:29.884 +07:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-03 12:18:29.943 +07:00 [INF] Now listening on: https://localhost:5003
2025-10-03 12:18:29.947 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-03 12:18:29.948 +07:00 [INF] Hosting environment: Development
2025-10-03 12:18:29.949 +07:00 [INF] Content root path: D:\HeThongQuanLyTramSac\src\services\BookingService
2025-10-03 12:25:45.189 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5003/swagger/index.html - null null
2025-10-03 12:25:45.263 +07:00 [INF] Request finished HTTP/2 GET https://localhost:5003/swagger/index.html - 200 null text/html;charset=utf-8 74.7311ms
2025-10-03 12:25:45.297 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5003/swagger/swagger-ui-standalone-preset.js - null null
2025-10-03 12:25:45.297 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5003/swagger/swagger-ui.css - null null
2025-10-03 12:25:45.297 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5003/swagger/swagger-ui-bundle.js - null null
2025-10-03 12:25:45.320 +07:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2025-10-03 12:25:45.320 +07:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2025-10-03 12:25:45.323 +07:00 [INF] Request finished HTTP/2 GET https://localhost:5003/swagger/swagger-ui.css - 200 143943 text/css 25.8015ms
2025-10-03 12:25:45.324 +07:00 [INF] Request finished HTTP/2 GET https://localhost:5003/swagger/swagger-ui-standalone-preset.js - 200 339486 text/javascript 27.0635ms
2025-10-03 12:25:45.337 +07:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2025-10-03 12:25:45.338 +07:00 [INF] Request finished HTTP/2 GET https://localhost:5003/swagger/swagger-ui-bundle.js - 200 1096145 text/javascript 41.1296ms
2025-10-03 12:25:45.467 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - null null
2025-10-03 12:25:45.471 +07:00 [INF] Request starting HTTP/2 GET https://localhost:5003/swagger/favicon-32x32.png - null null
2025-10-03 12:25:45.476 +07:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2025-10-03 12:25:45.478 +07:00 [INF] Request finished HTTP/2 GET https://localhost:5003/swagger/favicon-32x32.png - 200 628 image/png 6.4949ms
2025-10-03 12:25:45.576 +07:00 [INF] Request finished HTTP/2 GET https://localhost:5003/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 109.2178ms
2025-10-03 12:56:14.074 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM information_schema.tables
WHERE table_type = 'BASE TABLE' AND table_schema = 'EVChargingStation_Booking'
2025-10-03 12:56:14.121 +07:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-03 12:56:14.193 +07:00 [INF] Now listening on: https://localhost:5003
2025-10-03 12:56:14.196 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-03 12:56:14.197 +07:00 [INF] Hosting environment: Development
2025-10-03 12:56:14.198 +07:00 [INF] Content root path: D:\HeThongQuanLyTramSac\src\services\BookingService
2025-10-03 13:27:00.520 +07:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM information_schema.tables
WHERE table_type = 'BASE TABLE' AND table_schema = 'EVChargingStation_Booking'
2025-10-03 13:27:00.580 +07:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-03 13:27:00.661 +07:00 [INF] Now listening on: https://localhost:5003
2025-10-03 13:27:00.665 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-03 13:27:00.667 +07:00 [INF] Hosting environment: Development
2025-10-03 13:27:00.668 +07:00 [INF] Content root path: D:\HeThongQuanLyTramSac\src\services\BookingService
2025-10-03 13:39:11.254 +07:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM information_schema.tables
WHERE table_type = 'BASE TABLE' AND table_schema = 'EVChargingStation_Booking'
2025-10-03 13:39:11.311 +07:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-03 13:39:11.405 +07:00 [INF] Now listening on: https://localhost:5003
2025-10-03 13:39:11.409 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-03 13:39:11.410 +07:00 [INF] Hosting environment: Development
2025-10-03 13:39:11.412 +07:00 [INF] Content root path: D:\HeThongQuanLyTramSac\src\services\BookingService
2025-10-03 22:20:05.167 +07:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT CASE WHEN COUNT(*) = 0 THEN FALSE ELSE TRUE END
FROM information_schema.tables
WHERE table_type = 'BASE TABLE' AND table_schema = 'EVChargingStation_Booking'
2025-10-03 22:20:05.232 +07:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-10-03 22:20:05.323 +07:00 [INF] Now listening on: https://localhost:5003
2025-10-03 22:20:05.325 +07:00 [INF] Application started. Press Ctrl+C to shut down.
2025-10-03 22:20:05.326 +07:00 [INF] Hosting environment: Development
2025-10-03 22:20:05.327 +07:00 [INF] Content root path: D:\HeThongQuanLyTramSac\src\services\BookingService
